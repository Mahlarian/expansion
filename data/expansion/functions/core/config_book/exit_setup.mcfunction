execute at @e[type=item,nbt={Item:{id:"minecraft:barrier",Count:1b,tag:{display:{Name:'{"text":"Exit Config","color":"red","bold":true}',Lore:['{"text":"Dropping this item will exit the config menu and return the config book back to you","color":"white","bold":false,"italic":false}']}}}}] as @a[scores={exp_config_op=1..},limit=1,sort=nearest] run function expansion:core/config_book/clear_hotbar
execute at @e[type=item,nbt={Item:{id:"minecraft:barrier",Count:1b,tag:{display:{Name:'{"text":"Exit Config","color":"red","bold":true}',Lore:['{"text":"Dropping this item will exit the config menu and return the config book back to you","color":"white","bold":false,"italic":false}']}}}}] as @a[scores={exp_config_op=1..},limit=1,sort=nearest] run give @p written_book{display:{Name:'{"text":"Expansion Book","color":"blue"}'},title:"",author:"Expansion",pages:['[{"text":"Expansion ","color":"aqua"},{"text":" 1.0 Beta","color":"gray"},{"text":"\\nby ","color":"light_purple"},{"text":"Mahlarian","color":"light_purple","hoverEvent":{"action":"show_text","contents":[{"text":"*boop*"}]}},{"text":"\\n\\n","color":"green"},{"text":"[Edit Game Settings]","color":"green","hoverEvent":{"action":"show_text","contents":[{"text":"Clicking here will let you\\nmodify Expansion\'s settings\\nto alter the gameplay\\nexperience."}]},"clickEvent":{"action":"run_command","value":"/function expansion:core/config_book/begin_setup"}},{"text":"\\n\\n"},{"text":"[Start Game]","color":"blue","hoverEvent":{"action":"show_text","contents":[{"text":"Clicking here will start Expansion. \\n"},{"text":"You will not be able to edit the game\\n"},{"text":"settings until the game is over. "}]},"clickEvent":{"action":"run_command","value":"/function expansion:core/gameplay/sequences/player_init_start"}}]']} 1
execute at @e[type=item,nbt={Item:{id:"minecraft:barrier",Count:1b,tag:{display:{Name:'{"text":"Exit Config","color":"red","bold":true}',Lore:['{"text":"Dropping this item will exit the config menu and return the config book back to you","color":"white","bold":false,"italic":false}']}}}}] as @a[scores={exp_config_op=1..},limit=1,sort=nearest] run tellraw @s [{"text":"[Expansion] ","color":"aqua"},{"text":"Config Mode -","bold":true},{"text":" Disabled","color":"red","bold":true},{"text":"\nIt is safe to interact with the world again\n\n","color":"green"},{"text":"If you're ready, you can use the"},{"text":" config book","color":"light_purple","bold":true},{"text":" to start the game","color":"aqua"}]
execute at @e[type=item,nbt={Item:{id:"minecraft:barrier",Count:1b,tag:{display:{Name:'{"text":"Exit Config","color":"red","bold":true}',Lore:['{"text":"Dropping this item will exit the config menu and return the config book back to you","color":"white","bold":false,"italic":false}']}}}}] as @a[scores={exp_config_op=1..},limit=1,sort=nearest] run scoreboard players reset @s exp_config_op
execute unless entity @a[scores={exp_config_op=1..}] run scoreboard players set game_state exp_data 0
kill @e[type=item,nbt={Item:{id:"minecraft:barrier",Count:1b,tag:{display:{Name:'{"text":"Exit Config","color":"red","bold":true}',Lore:['{"text":"Dropping this item will exit the config menu and return the config book back to you","color":"white","bold":false,"italic":false}']}}}}]